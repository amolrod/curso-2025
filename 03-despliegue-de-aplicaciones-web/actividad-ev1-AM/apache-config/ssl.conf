# configuracion de sitios virtuales https

# sitio 1 - aplicacion php con login/registro
# requiere autenticacion basica de apache
<VirtualHost *:443>
    ServerName app1.local
    DocumentRoot /var/www/sitio1

    # habilitar ssl
    SSLEngine on
    SSLCertificateFile /etc/apache2/ssl/apache.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache.key

    # configuracion del directorio
    <Directory /var/www/sitio1>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require valid-user
        
        # autenticacion basica de apache
        AuthType Basic
        AuthName "area restringida - introduce credenciales"
        AuthUserFile /etc/apache2/.htpasswd
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/app1-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/app1-ssl-access.log combined
</VirtualHost>

# sitio 2 - pagina informativa simple
# acceso libre sin autenticacion
<VirtualHost *:443>
    ServerName app2.local
    DocumentRoot /var/www/sitio2

    # habilitar ssl
    SSLEngine on
    SSLCertificateFile /etc/apache2/ssl/apache.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache.key

    # configuracion del directorio
    <Directory /var/www/sitio2>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/app2-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/app2-ssl-access.log combined
</VirtualHost>
